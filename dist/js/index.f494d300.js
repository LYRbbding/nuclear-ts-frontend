(function(){var e={3276:function(e,t,a){"use strict";var l=a(9242),i=a(7173),s=(a(4415),a(3396)),n=a(7139);const o={style:{flex:"auto"}};function r(e,t,a,l,i,r){const u=(0,s.up)("el-input"),d=(0,s.up)("el-radio"),c=(0,s.up)("el-radio-group"),h=(0,s.up)("el-scrollbar"),f=(0,s.up)("el-table-column"),p=(0,s.up)("el-tag"),w=(0,s.up)("el-button"),m=(0,s.up)("el-table"),b=(0,s.up)("el-drawer"),k=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("h3",null,(0,n.zw)(e.date)+"，今日核酸做了吗？",1),(0,s.Wm)(u,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),placeholder:"输入姓名或学号筛选",clearable:""},null,8,["modelValue"]),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:e.school,"onUpdate:modelValue":t[1]||(t[1]=t=>e.school=t),style:{display:"flex","flex-wrap":"nowrap!important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{label:""},{default:(0,s.w5)((()=>[(0,s.Uk)("全部")])),_:1}),(0,s.Wm)(d,{label:"是"},{default:(0,s.w5)((()=>[(0,s.Uk)("在校 "+(0,n.zw)(e.inSchool),1)])),_:1}),(0,s.Wm)(d,{label:"否"},{default:(0,s.w5)((()=>[(0,s.Uk)("不在校 "+(0,n.zw)(e.outSchool),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:e.status,"onUpdate:modelValue":t[2]||(t[2]=t=>e.status=t),style:{display:"flex","flex-wrap":"nowrap!important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{label:""},{default:(0,s.w5)((()=>[(0,s.Uk)("全部")])),_:1}),(0,s.Wm)(d,{label:"未完成"},{default:(0,s.w5)((()=>[(0,s.Uk)("未完成 "+(0,n.zw)(e.nuclearUnfinish),1)])),_:1}),(0,s.Wm)(d,{label:"已完成"},{default:(0,s.w5)((()=>[(0,s.Uk)("已完成 "+(0,n.zw)(e.nuclearFinish),1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:e.classes,"onUpdate:modelValue":t[3]||(t[3]=t=>e.classes=t),style:{display:"flex","flex-wrap":"nowrap!important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{label:""},{default:(0,s.w5)((()=>[(0,s.Uk)("全部")])),_:1}),(0,s.Wm)(d,{label:"21"},{default:(0,s.w5)((()=>[(0,s.Uk)("21")])),_:1}),(0,s.Wm)(d,{label:"22"},{default:(0,s.w5)((()=>[(0,s.Uk)("22")])),_:1}),(0,s.Wm)(d,{label:"23"},{default:(0,s.w5)((()=>[(0,s.Uk)("23")])),_:1}),(0,s.Wm)(d,{label:"24"},{default:(0,s.w5)((()=>[(0,s.Uk)("24")])),_:1}),(0,s.Wm)(d,{label:"25"},{default:(0,s.w5)((()=>[(0,s.Uk)("25")])),_:1}),(0,s.Wm)(d,{label:"26"},{default:(0,s.w5)((()=>[(0,s.Uk)("26")])),_:1}),(0,s.Wm)(d,{label:"27"},{default:(0,s.w5)((()=>[(0,s.Uk)("27")])),_:1}),(0,s.Wm)(d,{label:"28"},{default:(0,s.w5)((()=>[(0,s.Uk)("28")])),_:1})])),_:1},8,["modelValue"])])),_:1}),e.showing?(0,s.wy)(((0,s.wg)(),(0,s.j4)(m,{key:0,data:e.tableData.filter((t=>(!e.search||-1!==t.name.indexOf(e.search)||-1!==t.id.indexOf(e.search))&&(!e.school||t.school===e.school)&&(!e.status||t.status===e.status)&&(!e.classes||t.class==="20192111"+e.classes))),style:{width:"100%",height:"calc(90vh - 128px)"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{prop:"id",label:"学号",width:"100"}),(0,s.Wm)(f,{prop:"name",label:"姓名"}),(0,s.Wm)(f,{prop:"school",label:"在校",width:"50"},{default:(0,s.w5)((e=>["是"===e.row.school?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"info",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("是")])),_:1})):((0,s.wg)(),(0,s.j4)(p,{key:1,type:"danger",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("否")])),_:1}))])),_:1}),(0,s.Wm)(f,{prop:"status",label:"核酸",width:"70"},{default:(0,s.w5)((e=>["已完成"===e.row.status?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"success",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("已完成")])),_:1})):((0,s.wg)(),(0,s.j4)(p,{key:1,type:"warning",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("未完成")])),_:1}))])),_:1}),(0,s.Wm)(f,{fixed:"right",label:"操作",width:"65"},{default:(0,s.w5)((t=>["未完成"==t.row.status?((0,s.wg)(),(0,s.j4)(w,{key:0,type:"success",size:"small",onClick:a=>e.handleFinish(t.$index,t.row)},{default:(0,s.w5)((()=>[(0,s.Uk)("完成")])),_:2},1032,["onClick"])):((0,s.wg)(),(0,s.j4)(w,{key:1,type:"warning",size:"small",onClick:a=>e.handleUndone(t.$index,t.row)},{default:(0,s.w5)((()=>[(0,s.Uk)("未完成")])),_:2},1032,["onClick"]))])),_:1})])),_:1},8,["data"])),[[k,e.loading]]):(0,s.wy)(((0,s.wg)(),(0,s.j4)(m,{key:1,data:e.tableData.filter((t=>(!e.search||-1!==t.name.indexOf(e.search)||-1!==t.id.indexOf(e.search))&&(!e.school||t.school===e.school)&&(!e.status||t.status===e.status)&&(!e.classes||t.class==="20192111"+e.classes))),style:{width:"100%",height:"calc(90vh - 128px)"}},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{prop:"id",label:"学号",width:"100"}),(0,s.Wm)(f,{prop:"name",label:"姓名"}),(0,s.Wm)(f,{prop:"school",label:"在校",width:"50"},{default:(0,s.w5)((e=>["是"===e.row.school?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"info",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("是")])),_:1})):((0,s.wg)(),(0,s.j4)(p,{key:1,type:"danger",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("否")])),_:1}))])),_:1}),(0,s.Wm)(f,{prop:"status",label:"核酸",width:"70"},{default:(0,s.w5)((e=>["已完成"===e.row.status?((0,s.wg)(),(0,s.j4)(p,{key:0,type:"success",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("已完成")])),_:1})):((0,s.wg)(),(0,s.j4)(p,{key:1,type:"warning",effect:"plain"},{default:(0,s.w5)((()=>[(0,s.Uk)("未完成")])),_:1}))])),_:1}),(0,s.Wm)(f,{fixed:"right",label:"操作",width:"65"},{default:(0,s.w5)((t=>["否"==t.row.school?((0,s.wg)(),(0,s.j4)(w,{key:0,type:"info",size:"small",onClick:a=>e.handleBack(t.$index,t.row)},{default:(0,s.w5)((()=>[(0,s.Uk)("返校")])),_:2},1032,["onClick"])):((0,s.wg)(),(0,s.j4)(w,{key:1,type:"danger",size:"small",onClick:a=>e.handleLeave(t.$index,t.row)},{default:(0,s.w5)((()=>[(0,s.Uk)("离校")])),_:2},1032,["onClick"]))])),_:1})])),_:1},8,["data"])),[[k,e.loading]]),(0,s.Wm)(b,{modelValue:e.confirmDialogVisible,"onUpdate:modelValue":t[4]||(t[4]=t=>e.confirmDialogVisible=t),direction:"btt"},{header:(0,s.w5)((()=>[(0,s._)("h4",null,(0,n.zw)(e.name),1)])),default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Uk)(" 请确认是否"),(0,s._)("span",{style:(0,n.j5)("已完成"==e.tips?"color:var(--el-color-success)":"color:var(--el-color-warning)")},(0,n.zw)(e.tips),5),(0,s.Uk)("核酸检测？ ")])])),footer:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(w,{onClick:e.cancelClick},{default:(0,s.w5)((()=>[(0,s.Uk)("取消")])),_:1},8,["onClick"]),(0,s.Wm)(w,{type:"primary",onClick:e.confirmClick},{default:(0,s.w5)((()=>[(0,s.Uk)("确认")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])],64)}a(7658);var u=a(7178),d=a(70),c=a(5410),h=a.n(c);const f=d.ZP.create({baseURL:"https://lyrbbding.site/lyr",timeout:3e3}),p=["POST","post","PUT","put"],w=["GET","get","DELETE","delete"];f.interceptors.request.use((e=>(e.method&&p.includes(e.method)?e.data=h().stringify(e.data):e.method&&w.includes(e.method)&&(e.params=h().parse(e.data),e.data=void 0),e)),(e=>e)),f.interceptors.response.use((e=>Promise.resolve(e)),(e=>e));var m=f;const b={nuclear_list:"/nuclear_list",nuclear_update:"/nuclear_update",nuclear_school:"/nuclear_school"};var k=b,g=e=>new Promise(((t,a)=>{m({url:k[e.url],data:e.data||{},method:e.method||"GET",responseType:e.responseType||"json"}).then((e=>{t(e.data)})).catch((e=>{a(e)}))})),_=(0,s.aZ)({name:"App",data(){let e=[],t=new Date;return{search:"",loading:!0,showing:!0,confirmDialogVisible:!1,tableData:e,tips:"",setStatus:"",id:"",name:"",currentIndex:-1,school:"是",status:"未完成",classes:"",date:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),inSchool:0,outSchool:0,nuclearFinish:0,nuclearUnfinish:0}},mounted(){const e=location.search;if(e){let t=new URLSearchParams(e),a=t.get("manage");a&&(this.showing=!1,console.log(a))}g({url:"nuclear_list"}).then((e=>{this.tableData.push(...e.res),this.nuclearFinish=this.tableData.filter((e=>"已完成"===e.status&&"是"===e.school)).length,this.nuclearUnfinish=this.tableData.filter((e=>"未完成"===e.status&&"是"===e.school)).length,this.inSchool=this.tableData.filter((e=>"是"===e.school)).length,this.outSchool=this.tableData.filter((e=>"否"===e.school)).length})).catch((()=>{u.z8.error("网络异常，请稍后再试")})).finally((()=>{this.loading=!1}))},methods:{filterSchool(e,t){return t.school===e},filterStatus(e,t){return t.status===e},findIndex(e,t){if(t.id!=this.tableData[e].id)for(let a=0;a<this.tableData.length;a++)if(t.id==this.tableData[a].id){e=a;break}return e},updateSchool(e,t){g({url:"nuclear_school",method:"POST",data:{id:this.tableData[e].id,date:this.tableData[e].date,school:t}}).then((a=>{0===a.errCode?(this.tableData[e].school=t,u.z8.success("操作成功")):u.z8.error("操作失败，请重试")})).catch((()=>{u.z8.error("网络异常，请稍后再试")}))},handleBack(e,t){e=this.findIndex(e,t),this.updateSchool(e,"是")},handleLeave(e,t){e=this.findIndex(e,t),this.updateSchool(e,"否")},handleFinish(e,t){if(t.id==this.tableData[e].id)this.currentIndex=e;else for(let a=0;a<this.tableData.length;a++)if(t.id==this.tableData[a].id){this.currentIndex=a;break}this.confirmDialogVisible=!0,this.tips="已完成",this.name=`${this.tableData[this.currentIndex].name}同学`,this.setStatus="finish"},handleUndone(e,t){if(t.id==this.tableData[e].id)this.currentIndex=e;else for(let a=0;a<this.tableData.length;a++)if(t.id==this.tableData[a].id){this.currentIndex=a;break}this.confirmDialogVisible=!0,this.tips="尚未完成",this.name=`${this.tableData[this.currentIndex].name}同学`,this.setStatus="undone"},cancelClick(){this.confirmDialogVisible=!1,this.currentIndex=-1,this.tips="",this.setStatus="",this.id="",this.name="",(0,u.z8)("操作取消")},confirmClick(){let e=this.currentIndex;if(this.id!=this.tableData[e].id)for(let t=0;t<this.tableData.length;t++)if(this.id==this.tableData[t].id){e=t;break}g({url:"nuclear_update",method:"POST",data:{id:this.tableData[e].id,date:this.tableData[e].date,status:"finish"==this.setStatus?1:0}}).then((t=>{0===t.errCode?(this.tableData[e].status="finish"==this.setStatus?"已完成":"未完成",u.z8.success("操作成功")):u.z8.error("操作失败，请重试")})).catch((()=>{u.z8.error("网络异常，请稍后再试")})).finally((()=>{this.confirmDialogVisible=!1,this.currentIndex=-1,this.tips="",this.setStatus="",this.id="",this.name=""}))}}}),y=a(89);const U=(0,y.Z)(_,[["render",r]]);var D=U;const x=(0,l.ri)(D);x.use(i.Z),x.mount("#app")},4654:function(){}},t={};function a(l){var i=t[l];if(void 0!==i)return i.exports;var s=t[l]={exports:{}};return e[l].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,l,i,s){if(!l){var n=1/0;for(d=0;d<e.length;d++){l=e[d][0],i=e[d][1],s=e[d][2];for(var o=!0,r=0;r<l.length;r++)(!1&s||n>=s)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(o=!1,s<n&&(n=s));if(o){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[l,i,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={826:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var i,s,n=l[0],o=l[1],r=l[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(r)var d=r(a)}for(t&&t(l);u<n.length;u++)s=n[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},l=self["webpackChunknuclear_ts_frontend"]=self["webpackChunknuclear_ts_frontend"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(3276)}));l=a.O(l)})();
//# sourceMappingURL=index.f494d300.js.map